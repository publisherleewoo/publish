<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="Generator" content="EditPlus��">
  <meta name="Author" content="">
  <meta name="Keywords" content="">
  <meta name="Description" content="">
  <title>Document</title>
  <script src="C:\Users\dlgud\AppData\Roaming\EditPlus\jquery.js"></script>
 <style>
	#wrap{width:500px; border:1px solid black;}
	#p1{width:500px; height:500px; background:blue;}
	#p2{width:500px; background:gray;}
	#p2:after{content:''; display:block; clear:both;}
	 #chatWrap{height:500px; overflow-y:scroll;}
	 .mychat {text-align:right;  }
	 .mychat span{display:block; background-color:yellow; opacity:0.3; transition:opacity 2s}
	 .userchat span{display:block; background-color:white; opacity:0.3; transition:opacity 2s}
	 textarea{float:left; width:450px;}
	 .button{float:left; width:70px; text-align:center;}
	 .userchat span.motion{opacity:1}
	 .mychat span.motion{opacity:1}
 </style>
 
 </head>
 <body>
<div id="wrap">
	<div id="p1">
		<div id="chatWrap">
	 
		</div>
	</div>
	<div id="p2">
		<textarea></textarea>
		<button>버튼</button>
	</div>

	<input type="button" value="상대방채팅 추가">
</div>
 <script>


$(document).ready(function(){
	var txta = $('textarea');
	var btn = $('button');
	var chatWrap = $('#chatWrap');
	var userBtn = $('input[type=button]')
	var para = chatWrap.children()
	var len = para.length
	var addChat = function(arg){
			var newChat = $('<p class='+arg.name+'><span>'+arg.val+'</span></p>');
			chatWrap.append(newChat);
			setTimeout(function(){
				newChat.find('span').addClass('motion')
			 },10)
			 len= len+1;	
			var scHeight  =chatWrap.prop('scrollHeight');
			chatWrap.scrollTop(scHeight);
			txta.val("");
	}
	
	btn.on('click',function(){
		var myChat = {
			name:'mychat',
			val:txta.val()
		}
		addChat(myChat)
		})
	userBtn.on('click',function(){
		var userChat = {
			name:'userchat',
			val:'상대방 채팅'
		}
		addChat(userChat)
	})
})
 </script>
 </body>
</html>
